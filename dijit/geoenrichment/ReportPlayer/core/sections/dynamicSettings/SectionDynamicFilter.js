// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.28/esri/copyright.txt for details.

define(["dojo/_base/declare","dojo/aspect","dojo/dom-construct","dijit/_WidgetBase","dijit/_TemplatedMixin","./chart/ChartFilter","./locator/LocatorFilter","./areaDetails/AreaDetailsFilter","./comparison/ComparisonFilter","./dynamicInfographic/DynamicInfographicFilter"],function(t,i,e,r,a,n,o,l,s,c){return t([r,a],{templateString:"<div class='esriGEReportPlayer_sectionDynamicFilter'></div>",areaDetailsFilter:null,chartFilter:null,comparisonFilter:null,dynamicInfographicFilter:null,locatorFilter:null,_areaDetailsFilterWidget:null,_chartFilterWidget:null,_comparisonFilterWidget:null,_dynamicInfographicFilterWidget:null,_locatorFilterWidget:null,postCreate:function(){this._tryInitAreaDetailsFilter(),this._tryInitChartFilter(),this._tryInitComparisonFilter(),this._tryInitDynamicInfographicFilter(),this._tryInitLocatorFilter()},_tryInitAreaDetailsFilter:function(){function t(){r._areaDetailsFilterWidget.setNumItems(r.areaDetailsFilter.getNumItemsTotal(),r.areaDetailsFilter.getNumItemsShown())}var r=this;this.areaDetailsFilter&&(this._areaDetailsFilterWidget=new l({onAreaDetailsFilterChanged:this.onAreaDetailsFilterChanged.bind(this)}).placeAt(e.create("div",{class:"sectionDynamicFilter_row"},this.domNode)),this.own(this._areaDetailsFilterWidget),t(),this.own(i.after(this.areaDetailsFilter,"onContentUpdated",t)))},_tryInitChartFilter:function(){function t(){r._chartFilterWidget.setNumElements(r.chartFilter.getNumElementsTotal(),r.chartFilter.getNumElementsShown())}var r=this;this.chartFilter&&(this._chartFilterWidget=new n({onFilterRangesChanged:this.onChartFilterChanged.bind(this)}).placeAt(e.create("div",{class:"sectionDynamicFilter_row"},this.domNode)),this.own(this._chartFilterWidget),this._chartFilterWidget.setSettings(this.chartFilter),t(),this.own(i.after(this.chartFilter,"onContentUpdated",t)))},_tryInitComparisonFilter:function(){function t(){r._comparisonFilterWidget.setNumAreas(r.comparisonFilter.getNumAreasTotal(),r.comparisonFilter.getNumAreasShown())}var r=this;this.comparisonFilter&&(this._comparisonFilterWidget=new s({onComparisonFilterChanged:this.onComparisonFilterChanged.bind(this)}).placeAt(e.create("div",{class:"sectionDynamicFilter_row"},this.domNode)),this.own(this._comparisonFilterWidget),this._comparisonFilterWidget.setFilter(this.comparisonFilter),t(),this.own(i.after(this.comparisonFilter,"onContentUpdated",t)))},_tryInitDynamicInfographicFilter:function(){function t(){r._dynamicInfographicFilterWidget.setNumAreas(r.dynamicInfographicFilter.getNumAreasTotal(),r.dynamicInfographicFilter.getNumAreasShown())}var r=this;this.dynamicInfographicFilter&&(this._dynamicInfographicFilterWidget=new c({onDynamicInfographicFilterChanged:this.onDynamicInfographicFilterChanged.bind(this)}).placeAt(e.create("div",{class:"sectionDynamicFilter_row"},this.domNode)),this.own(this._dynamicInfographicFilterWidget),this._dynamicInfographicFilterWidget.setFilter(this.dynamicInfographicFilter),t(),this.own(i.after(this.dynamicInfographicFilter,"onContentUpdated",t)))},updateDynamicInfographicFilter:function(t){if(this.dynamicInfographicFilter){var i=this._dynamicInfographicFilterWidget.domNode.parentNode;this._dynamicInfographicFilterWidget.destroy(),e.destroy(i),this.dynamicInfographicFilter=t,this._tryInitDynamicInfographicFilter()}},_tryInitLocatorFilter:function(){function t(){r._locatorFilterWidget.setNumPoints(r.locatorFilter.getNumPointsTotal(),r.locatorFilter.getNumPointsShown())}var r=this;this.locatorFilter&&(this._locatorFilterWidget=new o({onLocatorFilterChanged:this.onLocatorFilterChanged.bind(this)}).placeAt(e.create("div",{class:"sectionDynamicFilter_row"},this.domNode)),this.own(this._locatorFilterWidget),this._locatorFilterWidget.setFilterRanges(this.locatorFilter.filterRanges),t(),this.own(i.after(this.locatorFilter,"onContentUpdated",t)))},setVisualState:function(t){this._chartFilterWidget&&this._chartFilterWidget.setVisualState(t),this._locatorFilterWidget&&this._locatorFilterWidget.setVisualState(t),this._areaDetailsFilterWidget&&this._areaDetailsFilterWidget.setVisualState(t),this._comparisonFilterWidget&&this._comparisonFilterWidget.setVisualState(t),this._dynamicInfographicFilterWidget&&this._dynamicInfographicFilterWidget.setVisualState(t)},onAreaDetailsFilterChanged:function(t){},onChartFilterChanged:function(t){},onComparisonFilterChanged:function(t){},onLocatorFilterChanged:function(t){},onDynamicInfographicFilterChanged:function(t){},onClosePopup:function(){}})});