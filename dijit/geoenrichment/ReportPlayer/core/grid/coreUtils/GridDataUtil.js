// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.28/esri/copyright.txt for details.

define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil"],function(e,i,t){var l={};return l.getFieldCellValue=function(e){return e.gridData&&e.gridData[e.column.field]},l.setFieldCellContent=function(e,i){e.set("value",i),e.gridData[e.column.field]=i},l.clearFieldInfo=function(e,i){e.fieldInfos&&delete e.fieldInfos[i],e[i]="",l.setNumericDataValue(void 0,e,i)},l.getNumericCellValue=function(e){return l.getNumericDataValue(e.gridData,e.column.field)},l.setNumericCellValue=function(e,i){return l.setNumericDataValue(i,e.gridData,e.column.field)},l.getNumericDataValue=function(e,i){return e&&i&&e[i+"_numeric"]},l.setNumericDataValue=function(e,i,t){i[t+"_numeric"]=e},l.isEmptyCell=function(e){return!e.get("value")&&!e.gridData[e.column.field]&&!l.getFieldInfo(e)},l.hasSpans=function(e){return l.getColumnSpan(e)||l.getRowSpan(e)},l.getColumnSpan=function(e){return e.gridData&&e.gridData.columnSpans&&e.gridData.columnSpans[e.column.field]},l.getRowSpan=function(e){return e.gridData&&e.gridData.rowSpans&&e.gridData.rowSpans[e.column.field]},l.getDataColumnSpan=function(e,i){return e&&e.columnSpans&&e.columnSpans[i]},l.getDataRowSpan=function(e,i){return e&&e.rowSpans&&e.rowSpans[i]},l.getFieldInfo=function(e){return e&&e.gridData&&e.gridData.fieldInfos&&e.gridData.fieldInfos[e.column.field]},l.getGridFirstFieldInfo=function(e){return l.getFieldInfo(e.getFirstCell())},l.setFieldInfo=function(e,i){e.gridData&&(e.gridData.fieldInfos[e.column.field]=i)},l.provideFieldInfo=function(e){return l.setFieldInfo(e,l.getFieldInfo(e)||{}),l.getFieldInfo(e)},l.getCellStyle=function(e,i){if(!e||!e.gridData)return null;var t=e.gridData.style&&e.gridData.style.fields&&e.gridData.style.fields[e.column.field];return!t&&i&&(t={},l.setCellStyle(e,t)),t},l.setCellStyle=function(e,i){var t=e.gridData.style=e.gridData.style||{};t.fields=t.fields||{},t.fields[e.column.field]=i},l.updateCellStyle=function(i,t){var n=l.getCellStyle(i,!0);e.mixin(n,t)},l.copyFieldStyle=function(e,i,t){var n=l.getCellStyle(e),r=l.getCellStyle(i,!0);for(var a in t)void 0!==n[a]&&(r[a]=n[a])},l.getFieldCellUrl=function(e){if(e.gridData&&e.gridData.urls&&e.column)return e.gridData.urls[e.column.field]},l.setFieldCellUrl=function(e,i){e.gridData&&e.column&&(e.gridData.urls=e.gridData.urls||{},void 0===i?delete e.gridData.urls[e.column.field]:e.gridData.urls[e.column.field]=i)},l.getConditionalFormatting=function(e){var i=l.getFieldInfo(e);return i&&i.triggerJson},l.setConditionalFormatting=function(i,t){var n=l.provideFieldInfo(i);t&&t.fieldInfo===n&&(t.fieldInfo=e.clone(t.fieldInfo),delete t.fieldInfo.triggerJson),n.triggerJson=t},l._toFieldInfo=function(e){return e?e.gridData?l.getFieldInfo(e):"object"==typeof e&&e:null},l.isRichTextCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.isRichText)},l.isVariableFieldCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.hasVariable&&!i.script)},l.isOnlyVariableFieldCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.hasVariable)},l.isScriptFieldCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.script)},l.isUneditableScript=function(e){var i=l._toFieldInfo(e);return!!(i&&i.script&&i.script.isUneditableScript)},l.isNumericVariableFieldCell=function(e){var i=l._toFieldInfo(e);return!(!i||!(i.hasVariable&&t.isNumericField(i)||i.script&&!i.script.isUneditableScript&&"String"!==i.script.type))},l.isCalculatableNumericVariableFieldCell=function(e){var i=l._toFieldInfo(e);return(!i||!i.isSiteAttribute&&!i.isWebMap)&&l.isNumericVariableFieldCell(e)},l.isStringVariableFieldCell=function(e){var i=l._toFieldInfo(e);return!(!i||!(i.hasVariable&&"esriFieldTypeString"===i.type||i.script&&"String"===i.script.type))},l.isImageCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.isImage)},l.isMapImageCell=function(e){var i=l._toFieldInfo(e);return!!(i&&i.isImage&&i.imageJson.isMapImage)},l.isImageTriggerCell=function(e){var i=l._toFieldInfo(e);return!!(i&&i.isImage&&i.triggerJson)},l.isShapeCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.isShape)},l.isEmptyShapeCell=function(e){var i=l._toFieldInfo(e),t=i&&i.shapeJson;return!(!t||t.g&&t.g.length)},l.isReportSectionCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.isReportSection)},l.isInfographicCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.isInfographic)},l.isChartCell=function(e){var i=l._toFieldInfo(e);return!(!i||!i.isChart)},l.isSpecialFieldCell=function(e){var t=l._toFieldInfo(e);return t&&!l.isVariableFieldCell(e)&&i.hasField(t.name)},l.isTextLikeCell=function(e){return!l._toFieldInfo(e)||l.isRichTextCell(e)||l.isVariableFieldCell(e)||l.isSpecialFieldCell(e)},l});